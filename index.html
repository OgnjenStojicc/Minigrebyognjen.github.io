<!doctype html>
<html lang="sr">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Mini igre</title>
<style>
  :root{--bg:#0f1724;--card:#0b1220;--accent:#16a34a;--muted:#94a3b8;--danger:#ef4444;--glass:rgba(255,255,255,0.03)}
  body{font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,"Helvetica Neue",Arial;margin:0;background:linear-gradient(180deg,#071021 0%, #07182b 100%);color:#e6eef8;min-height:100vh;display:flex;align-items:center;justify-content:center;padding:20px}
  .container{width:100%;max-width:1100px;background:linear-gradient(180deg, rgba(255,255,255,0.02), transparent);border-radius:12px;padding:18px;box-shadow:0 10px 30px rgba(2,6,23,0.6)}
  h1{margin:0 0 12px 0;font-size:20px}
  .tabs{display:flex;gap:8px;flex-wrap:wrap;margin-bottom:12px}
  .tab{padding:8px 12px;border-radius:8px;background:var(--glass);cursor:pointer;color:var(--muted);user-select:none}
  .tab.active{background:linear-gradient(90deg,#06202a,#0b2a33);color:#fff;box-shadow:0 4px 14px rgba(2,6,23,0.6)}
  .panel{display:none;padding:12px;background:transparent;border-radius:8px}
  .panel.active{display:block}
  .game-row{display:flex;gap:12px;flex-wrap:wrap}
  .card{flex:1 1 320px;background:var(--card);padding:12px;border-radius:10px;box-shadow:inset 0 1px 0 rgba(255,255,255,0.02)}
  button, input[type="number"], select, input[type="text"]{font:inherit;padding:8px;border-radius:8px;border:1px solid rgba(255,255,255,0.06);background:transparent;color:inherit;outline:none}
  .muted{color:var(--muted);font-size:13px}
  .small{font-size:13px}
  .center{display:flex;gap:8px;align-items:center}
  .green{color:var(--accent)}
  .danger{color:var(--danger)}
  pre{white-space:pre-wrap;word-break:break-word}
  .kbd{background:#06121a;padding:4px 8px;border-radius:6px;border:1px solid rgba(255,255,255,0.03)}
</style>
</head>
<body>
  <div class="container">
    <h1>Mini igre — sve u jednom mestu</h1>
    <div class="tabs" id="tabs">
      <div class="tab active" data-tab="guess100">Pogodi 1–100</div>
      <div class="tab" data-tab="guess1000">Pogodi 1–1000</div>
      <div class="tab" data-tab="reaction">Refleksi</div>
      <div class="tab" data-tab="rps">Kamen/Papir/Makaze</div>
      <div class="tab" data-tab="typing">Typing</div>
      <div class="tab" data-tab="hangman">Hangman</div>
    </div>

    <div class="panel active" id="guess100">
      <div class="game-row">
        <div class="card">
          <h3>Pogodi broj 1–100</h3>
          <p class="muted">Pokušaj da pogodiš nasumičan broj. Prati hintove.</p>
          <div style="display:flex;gap:8px;margin:8px 0">
            <input id="g100-input" type="number" min="1" max="100" placeholder="1-100">
            <button id="g100-guess">Pogodi</button>
            <button id="g100-new">Novi broj</button>
          </div>
          <div class="small muted">Pokušaji: <span id="g100-attempts">0</span></div>
          <div style="margin-top:8px"><strong id="g100-msg"></strong></div>
        </div>

        <div class="card">
          <h3>Podesavanja</h3>
          <p class="muted">Možeš resetovati igru i videti cilj ako želiš (varanje).</p>
          <div style="display:flex;gap:8px;margin-top:8px">
            <button id="g100-reveal">Prikaži cilj</button>
            <button id="g100-hide">Sakrij cilj</button>
          </div>
          <div style="margin-top:12px" class="muted">Cilj (samo za debug): <span id="g100-target">-</span></div>
        </div>
      </div>
    </div>

    <div class="panel" id="guess1000">
      <div class="game-row">
        <div class="card">
          <h3>Pogodi broj 1–1000</h3>
          <p class="muted">Slično kao gore, ali 1–1000.</p>
          <div style="display:flex;gap:8px;margin:8px 0">
            <input id="g1000-input" type="number" min="1" max="1000" placeholder="1-1000">
            <button id="g1000-guess">Pogodi</button>
            <button id="g1000-new">Novi broj</button>
          </div>
          <div class="small muted">Pokušaji: <span id="g1000-attempts">0</span></div>
          <div style="margin-top:8px"><strong id="g1000-msg"></strong></div>
        </div>
        <div class="card">
          <h3>Hint</h3>
          <p class="muted">Možeš koristiti binary search metodu: počni sa 500, pa prilagođavaj.</p>
          <div style="margin-top:8px"><button id="g1000-show-range">Prikaži trenutni range</button></div>
          <div class="muted" style="margin-top:8px">Range: <span id="g1000-range">1 - 1000</span></div>
        </div>
      </div>
    </div>

    <div class="panel" id="reaction">
      <div class="game-row">
        <div class="card">
          <h3>Refleksi</h3>
          <p class="muted">Klikni 'Start' i čekaj dok polje ne postane zeleno. Klikni brzo!</p>
          <div style="display:flex;gap:8px;margin:8px 0">
            <button id="react-start">Start</button>
            <button id="react-stop" disabled>Stop</button>
            <button id="react-reset">Reset</button>
          </div>
          <div style="margin-top:8px">
            <div id="react-box" style="width:100%;height:80px;border-radius:8px;background:#07121b;display:flex;align-items:center;justify-content:center;font-size:18px;user-select:none">Čekanje...</div>
          </div>
          <div style="margin-top:10px" class="muted">Poslednje vreme: <strong id="react-last">-</strong></div>
          <div class="muted">Prosek: <strong id="react-avg">-</strong></div>
          <div class="muted">Rank: <strong id="react-rank">-</strong></div>
        </div>

        <div class="card">
          <h3>Statistika</h3>
          <p class="muted">Skladišti poslednjih 10 rezultata tokom sesije.</p>
          <ol id="react-list" style="padding-left:18px;margin-top:8px"></ol>
        </div>
      </div>
    </div>

    <div class="panel" id="rps">
      <div class="game-row">
        <div class="card">
          <h3>Kamen / Papir / Makaze</h3>
          <p class="muted">Izaberi modus i igraj. Prvi do 3 pobede.</p>
          <div style="display:flex;gap:8px;margin:8px 0;align-items:center">
            <select id="rps-mode">
              <option value="fair">Normalno</option>
              <option value="80">80% šanse za tebe</option>
              <option value="cheat">Uvek pobediš</option>
            </select>
            <button id="rps-reset">Resetuj</button>
          </div>

          <div style="display:flex;gap:8px;margin:8px 0">
            <button class="rps-btn" data-move="kamen">Kamen</button>
            <button class="rps-btn" data-move="papir">Papir</button>
            <button class="rps-btn" data-move="makaze">Makaze</button>
          </div>

          <div class="muted">Rezultat: <span id="rps-result">Ti 0 - 0 Računar</span></div>
          <div style="margin-top:8px"><strong id="rps-msg"></strong></div>
        </div>

        <div class="card">
          <h3>Statistika</h3>
          <p class="muted">Igra se best of 5 (prvi do 3 pobede).</p>
          <div class="muted" style="margin-top:8px">Tvoj score: <strong id="rps-you">0</strong></div>
          <div class="muted">Comp score: <strong id="rps-comp">0</strong></div>
        </div>
      </div>
    </div>

    <div class="panel" id="typing">
      <div class="game-row">
        <div class="card">
          <h3>Typing — measure speed</h3>
          <p class="muted">Klikni Start, pa otkucaj tačnu reč što brže možeš.</p>
          <div style="display:flex;gap:8px;margin:8px 0">
            <button id="type-start">Start</button>
            <button id="type-new">Nova reč</button>
          </div>
          <div style="margin-top:8px">Reč: <strong id="type-word">-</strong></div>
          <div style="display:flex;gap:8px;margin-top:8px">
            <input id="type-input" type="text" placeholder="Otkucaj reč ovde" />
            <button id="type-check">Proveri</button>
          </div>
          <div class="muted" style="margin-top:8px">Vreme: <strong id="type-time">-</strong></div>
        </div>

        <div class="card">
          <h3>Reči</h3>
          <p class="muted">Lista reči sa različitim težinama.</p>
          <div class="muted" style="margin-top:8px">Napomena: ne razlikuje velika/mala slova.</div>
        </div>
      </div>
    </div>

    <div class="panel" id="hangman">
      <div class="game-row">
        <div class="card">
          <h3>Hangman</h3>
          <p class="muted">Pogađaj slova pre nego što ti ponestane pokušaja.</p>
          <div style="margin-top:8px">Reč: <span id="hang-display">-</span></div>
          <div style="margin-top:8px">Pokušaji preostali: <strong id="hang-attempts">-</strong></div>
          <div style="display:flex;gap:8px;margin-top:8px">
            <input id="hang-input" maxlength="1" placeholder="Unesi slovo" />
            <button id="hang-guess">Pogodi</button>
            <button id="hang-new">Nova reč</button>
          </div>
          <div style="margin-top:8px" class="muted">Isprobana slova: <span id="hang-tried">-</span></div>
        </div>

        <div class="card">
          <h3>Reči</h3>
          <p class="muted">Tema: programiranje.</p>
        </div>
      </div>
    </div>

  </div>

<script>
/* ---------- tabs ---------- */
document.querySelectorAll('.tab').forEach(t=>{
  t.addEventListener('click', ()=> {
    document.querySelectorAll('.tab').forEach(x=>x.classList.remove('active'));
    document.querySelectorAll('.panel').forEach(p=>p.classList.remove('active'));
    t.classList.add('active');
    document.getElementById(t.dataset.tab).classList.add('active');
  });
});

/* ---------- Pogodi 1-100 ---------- */
(function(){
  const targetEl = document.getElementById('g100-target');
  const msg = document.getElementById('g100-msg');
  const attemptsEl = document.getElementById('g100-attempts');
  let target = rand(1,100), attempts=0, revealed=false;
  targetEl.textContent = '-';
  function reset(){ target = rand(1,100); attempts=0; attemptsEl.textContent=attempts; msg.textContent=''; targetEl.textContent = revealed? target : '-'; }
  document.getElementById('g100-new').onclick = ()=>{ reset(); };
  document.getElementById('g100-guess').onclick = ()=> {
    const val = Number(document.getElementById('g100-input').value);
    if (!val || val<1 || val>100){ msg.textContent='Unesi broj 1-100'; return;}
    attempts++; attemptsEl.textContent=attempts;
    if (val === target) { msg.textContent = 'Bravo! Pogodio si!'; }
    else if (val < target) msg.textContent = 'Pogodi veći broj!';
    else msg.textContent = 'Pogodi manji broj!';
  };
  document.getElementById('g100-reveal').onclick = ()=>{ revealed=true; targetEl.textContent = target; };
  document.getElementById('g100-hide').onclick = ()=>{ revealed=false; targetEl.textContent = '-'; };
  reset();
})();

/* ---------- Pogodi 1-1000 ---------- */
(function(){
  const rangeEl = document.getElementById('g1000-range');
  const msg = document.getElementById('g1000-msg');
  let low=1,high=1000,target=rand(1,1000),attempts=0;
  function reset(){ low=1; high=1000; target=rand(1,1000); attempts=0; rangeEl.textContent = `${low} - ${high}`; msg.textContent=''; document.getElementById('g1000-attempts').textContent=attempts; }
  document.getElementById('g1000-new').onclick = reset;
  document.getElementById('g1000-guess').onclick = ()=>{
    const v = Number(document.getElementById('g1000-input').value);
    if (!v || v<1||v>1000){ msg.textContent='Unesi broj 1-1000'; return;}
    attempts++; document.getElementById('g1000-attempts').textContent=attempts;
    if (v===target){ msg.textContent = `Tačno! Pogodio si za ${attempts} pokušaja.`; }
    else if (v < target){ msg.textContent='Veći!'; low = Math.max(low, v+1); rangeEl.textContent = `${low} - ${high}`; }
    else { msg.textContent='Manji!'; high = Math.min(high, v-1); rangeEl.textContent = `${low} - ${high}`; }
  };
  document.getElementById('g1000-show-range').onclick = ()=>{ rangeEl.textContent = `${low} - ${high}`; };
  reset();
})();

/* ---------- Reaction ---------- */
(function(){
  const box = document.getElementById('react-box');
  const startBtn = document.getElementById('react-start');
  const stopBtn = document.getElementById('react-stop');
  const resetBtn = document.getElementById('react-reset');
  const lastEl = document.getElementById('react-last');
  const avgEl = document.getElementById('react-avg');
  const rankEl = document.getElementById('react-rank');
  const listEl = document.getElementById('react-list');

  let timeoutId = null;
  let state = 'idle'; // idle, waiting, ready
  let startTime = 0;
  let results = [];

  function updateStats(){
    if (results.length===0){ avgEl.textContent='-'; rankEl.textContent='-'; listEl.innerHTML=''; return;}
    const avg = results.reduce((a,b)=>a+b,0)/results.length;
    avgEl.textContent = (avg/1000).toFixed(3) + ' s';
    rankEl.textContent = rankFromMs(avg);
    lastEl.textContent = (results[results.length-1]/1000).toFixed(3) + ' s';
    listEl.innerHTML = results.slice(-10).map(r=>`<li>${(r/1000).toFixed(3)} s</li>`).join('');
  }

  startBtn.onclick = ()=>{
    if (state !== 'idle') return;
    box.style.background = '#073d2a';
    box.textContent = 'Čekaj...';
    state = 'waiting';
    stopBtn.disabled = false;
    startBtn.disabled = true;
    const wait = rand(1000,5000);
    timeoutId = setTimeout(()=> {
      box.style.background = 'linear-gradient(90deg,#16a34a,#10b981)';
      box.textContent = 'SADA! Klikni!';
      startTime = performance.now();
      state = 'ready';
    }, wait);
  };

  box.addEventListener('click', ()=>{
    if (state === 'ready'){
      const t = performance.now() - startTime;
      results.push(t);
      if (results.length>100) results.shift();
      box.style.background = '#07121b';
      box.textContent = 'Čekanje...';
      state = 'idle';
      clearTimeout(timeoutId);
      startBtn.disabled = false; stopBtn.disabled = true;
      updateStats();
    } else if (state === 'waiting'){
      // prerano
      clearTimeout(timeoutId);
      box.style.background = '#410909';
      box.textContent = 'Preuranjen klik! Pokušaj ponovo.';
      state = 'idle';
      startBtn.disabled = false; stopBtn.disabled = true;
    }
  });

  stopBtn.onclick = ()=>{
    if (timeoutId) clearTimeout(timeoutId);
    box.style.background = '#07121b'; box.textContent = 'Prekinuto'; state='idle';
    startBtn.disabled = false; stopBtn.disabled = true;
  };

  resetBtn.onclick = ()=>{
    results = []; updateStats(); box.style.background = '#07121b'; box.textContent='Čekanje...'; startBtn.disabled=false; stopBtn.disabled=true;
  };

  function rankFromMs(ms){
    const s = ms/1000;
    if (s < 0.2) return '⚡ Nadljudska brzina!';
    if (s < 0.4) return '🏆 Šampion reflekasa!';
    if (s < 0.6) return '👍 Dobro!';
    if (s < 1) return '😐 Može to i brže...';
    return '🐢 Spor kao puž!';
  }

  updateStats();
})();

/* ---------- RPS ---------- */
(function(){
  const moves = ['kamen','papir','makaze'];
  let you = 0, comp = 0;
  const youEl = document.getElementById('rps-you');
  const compEl = document.getElementById('rps-comp');
  const resultEl = document.getElementById('rps-result');
  const msgEl = document.getElementById('rps-msg');
  const modeSelect = document.getElementById('rps-mode');
  const buttons = document.querySelectorAll('.rps-btn');

  function reset(){ you=0; comp=0; update(); msgEl.textContent=''; }
  function update(){ youEl.textContent = you; compEl.textContent = comp; resultEl.textContent = `Ti ${you} - ${comp} Računar`; }

  buttons.forEach(b=> b.addEventListener('click', ()=>{
    const player = b.dataset.move;
    const mode = modeSelect.value;
    let computer;
    if (mode === 'fair') {
      computer = moves[rand(0,2)];
    } else if (mode === '80') {
      if (Math.random() < 0.8) computer = counterToLose(player); else computer = counterToWin(player);
    } else { // cheat: always lose vs player
      computer = counterToLose(player);
    }
    msgEl.textContent = `Računar bira: ${computer}`;
    const res = decide(player, computer);
    if (res === 'win') { you++; msgEl.textContent += ' — Pobedio si rundu!'; }
    else if (res === 'lose') { comp++; msgEl.textContent += ' — Izgubio si rundu.'; }
    else msgEl.textContent += ' — Nerešeno.';
    update();
    if (you >= 3 || comp >= 3) {
      setTimeout(()=> {
        if (you>comp) alert('🎉 Bravo! Pobedio si igru!'); else alert('💻 Računar je pobedio.');
        reset();
      }, 100);
    }
  }));

  document.getElementById('rps-reset').onclick = reset;

  function counterToLose(p){ // computer picks move that loses to player's move
    if (p==='kamen') return 'makaze';
    if (p==='papir') return 'kamen';
    return 'papir';
  }
  function counterToWin(p){ // computer picks move that beats player
    if (p==='kamen') return 'papir';
    if (p==='papir') return 'makaze';
    return 'kamen';
  }
  function decide(p,c){
    if (p===c) return 'draw';
    if ((p==='kamen'&&c==='makaze')||(p==='papir'&&c==='kamen')||(p==='makaze'&&c==='papir')) return 'win';
    return 'lose';
  }
  reset();
})();

/* ---------- Typing ---------- */
(function(){
  const words = ["programiranje","javascript","algoritam","kompjuter","internet","developer","petlja","funkcija","varijabla","bazapodataka","interfejs","optimizacija"];
  const wordEl = document.getElementById('type-word');
  const input = document.getElementById('type-input');
  const timeEl = document.getElementById('type-time');
  let current='', startTime=0;

  document.getElementById('type-new').onclick = ()=> setWord();
  document.getElementById('type-start').onclick = ()=> { setWord(); input.focus(); startTime = performance.now(); };
  document.getElementById('type-check').onclick = check;

  function setWord(){
    current = words[rand(0, words.length-1)];
    wordEl.textContent = current;
    input.value = '';
    timeEl.textContent = '-';
    startTime = performance.now();
  }
  function check(){
    const v = input.value.trim();
    if (!v) return;
    const end = performance.now();
    if (v.toLowerCase() === current.toLowerCase()){
      timeEl.textContent = ((end-startTime)/1000).toFixed(3) + ' s';
    } else {
      timeEl.textContent = 'Pogrešno!';
    }
  }
})();

/* ---------- Hangman ---------- */
(function(){
  const words = ["programiranje","javascript","algoritam","kompjuter","internet","developer","petlja","funkcija","varijabla"];
  const display = document.getElementById('hang-display');
  const attemptsEl = document.getElementById('hang-attempts');
  const triedEl = document.getElementById('hang-tried');
  const input = document.getElementById('hang-input');
  let secret='', masked=[], attempts=6, tried=[];

  function reset(){
    secret = words[rand(0,words.length-1)];
    masked = secret.split('').map(()=>'_');
    attempts = 6; tried = [];
    updateUI();
  }
  function updateUI(){
    display.textContent = masked.join(' ');
    attemptsEl.textContent = attempts;
    triedEl.textContent = tried.join(', ') || '-';
  }
  document.getElementById('hang-new').onclick = reset;
  document.getElementById('hang-guess').onclick = ()=>{
    const ch = input.value.trim().toLowerCase();
    input.value = '';
    if (!ch || ch.length!==1 || !/^[a-zčćšđž]+$/.test(ch)) return;
    if (tried.includes(ch)) return;
    tried.push(ch);
    if (secret.includes(ch)){
      secret.split('').forEach((s,i)=>{ if (s===ch) masked[i]=ch; });
      if (!masked.includes('_')) { alert('🎉 Pogodio si reč: '+secret); reset(); return; }
    } else {
      attempts--;
      if (attempts<=0){ alert('💀 Izgubio si! Tačna reč je: '+secret); reset(); return; }
    }
    updateUI();
  };
  reset();
})();

/* ---------- helpers ---------- */
function rand(a,b){ // inclusive for ints
  if (b===undefined) return Math.floor(Math.random()*a);
  return Math.floor(Math.random()*(b-a+1))+a;
}
</script>
</body>
</html>
